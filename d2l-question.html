<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../d2l-fetch-siren-entity-behavior/d2l-fetch-siren-entity-behavior.html">
<link rel="import" href="../quiz/d2l-quiz-question-true-false.html">

<!--
'd2l-question'
Polymer-based web component for D2L questions

@demo demo/index.hmtl
-->

<dom-module id="d2l-question">
	<template>
		<style>
			:host {
				display: block;
			}
		</style>
	</template>
	<script>
		class D2LQuestion extends Polymer.mixinBehaviors(D2L.PolymerBehaviors.FetchSirenEntityBehavior, Polymer.Element) {
			static get is() {
				return 'd2l-question';
			}
			constructor() {
				super();
			}

			static get properties() {
				return {
					href: {
						type: String,
						observer: '_getQuestionData'
					}
				}
			}

			_appendQuestionType(questionData) {
				//switch(questionData.properties.question.extension.questionType) {
					//case 2:
						this.shadowRoot.appendChild(document.createElement('d2l-quiz-question-true-false'));
						this.shadowRoot.querySelector('d2l-quiz-question-true-false').setAttribute('question-data', {"bodyText":"text"});
						//break;
				//}
			}

			_getQuestionData() {
				if (this.href) {
					this._fetchEntity(this.href)
					.then((questionData) => {this._appendQuestionType(questionData);}, () => {console.log('FAIL'); this._appendQuestionType();});
				}
			}
		}
		customElements.define(D2LQuestion.is, D2LQuestion);
	</script>
</dom-module>
